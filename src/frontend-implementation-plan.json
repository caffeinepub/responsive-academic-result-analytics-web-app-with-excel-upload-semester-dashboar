{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Adjust subject abbreviation rules and add test coverage",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Update subject abbreviation derivation to ignore the word \"and\" and apply a custom rule for \"through\" while preserving existing formatting fallbacks.",
      "acceptanceCriteria": [
        "For a subject name containing \"and\" (case-insensitive), the abbreviation does not include a letter derived from that word (e.g., \"Research and Development\" -> \"RD\").",
        "For a subject name containing \"through\" (case-insensitive), the abbreviation uses the agreed custom mapping for that word (not the default single first letter).",
        "Existing callers of formatSubjectCodeWithAbbreviation continue to render without runtime errors, and subject codes still fall back to code-only display when the subject name is missing or unavailable."
      ],
      "file_operations": [
        {
          "path": "frontend/src/lib/format/subjectAbbreviation.ts",
          "operation": "modify",
          "description": "Update deriveSubjectAbbreviation to: (1) split and normalize words case-insensitively, (2) exclude the word \"and\" from contributing to the abbreviation, and (3) apply a custom token-to-abbreviation mapping for the word \"through\" (e.g., map to \"TH\" rather than default first-letter behavior). Keep existing empty-input handling and ensure formatSubjectCodeWithAbbreviation continues to fall back to code-only when the subject name is missing/unavailable."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Add lightweight unit test coverage for deriveSubjectAbbreviation including \"and\", \"through\", and case-insensitive behavior.",
      "acceptanceCriteria": [
        "Tests demonstrate that \"and\" is excluded from abbreviation derivation.",
        "Tests demonstrate the custom handling for \"through\".",
        "Tests cover case-insensitive matching for both words."
      ],
      "file_operations": [
        {
          "path": "frontend/src/lib/format/subjectAbbreviation.test.ts",
          "operation": "create",
          "description": "Add unit tests for deriveSubjectAbbreviation covering: normal multi-word input, exclusion of \"and\" (case-insensitive), custom handling for \"through\" (case-insensitive), and mixed-case inputs combining both words."
        },
        {
          "path": "frontend/package.json",
          "operation": "modify",
          "description": "If not already present in this repo, wire in the existing codebase's lightweight test runner setup so the new deriveSubjectAbbreviation tests can be executed (e.g., add/adjust a test script and ensure the chosen runner can discover *.test.ts files). Keep changes minimal and limited to enabling/running the added tests."
        }
      ]
    }
  ]
}